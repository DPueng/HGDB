<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dp.hgdb.mappers.ComparePageMapper">

    <!--selectAnno()-->
    <resultMap id="AnnoResultMap" type="dp.hgdb.pojo.AnnoPojo">
        <result column="Accession" jdbcType="VARCHAR" property="accession"/>
        <result column="gene_symbol" jdbcType="VARCHAR" property="geneSymbol"/>
        <result column="Description" jdbcType="VARCHAR" property="description"/>
        <result column="Molecular_weight" jdbcType="INTEGER" property="molecularWeight"/>
    </resultMap>
    <select id="selectAnno" resultMap="AnnoResultMap">
        SELECT
            protein_annotation.Accession,
            protein_annotation.gene_symbol,
            protein_annotation.Description,
            protein_annotation.Molecular_weight
        FROM
            protein_annotation
    </select>

    <!--selectByExpID()-->
    <resultMap id="ExpResultMap" type="dp.hgdb.pojo.ExpPojo">
        <result column="Accession" jdbcType="VARCHAR" property="accession"/>
        <result column="Ratio" jdbcType="DECIMAL" property="ratio"/>
        <result column="peptideNum" jdbcType="INTEGER" property="peptideNum"/>
    </resultMap>
    <select id="selectByExpID" parameterType="java.lang.Integer"  resultMap="ExpResultMap">
        SELECT
            protein_level.Accession,
            protein_level.Ratio,
            COUNT(peptide_level.Peptide_id) AS peptideNum
        FROM
            peptide_level,
            protein_level
        WHERE
            peptide_level.Exp_id = #{ExpId,jdbcType=INTEGER}
            AND protein_level.Protein_id = peptide_level.Protein_id
        GROUP BY peptide_level.Protein_id
    </select>


</mapper>